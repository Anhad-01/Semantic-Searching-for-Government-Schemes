# Semantic Search Dashboard for Government Schemes

This project provides a semantic search dashboard for government schemes using Streamlit, FAISS, and Sentence Transformers.

## Features
- Semantic search over government schemes using multilingual sentence embeddings
- **Side-by-side comparison of Euclidean (L2) and Cosine Similarity**: See how different similarity metrics affect your search results
- Smart filtering by Indian states and central (ministry) schemes
- **Explicit state filter**: Select a state from the sidebar to filter results, or let the system detect the state from your query
- **User-friendly search controls**: Prominent search input, primary search button, and a clear search button to reset your query/results
- **Visually distinct result cards**: Each result is shown as a card with scheme name, state, tags, relevance score, and expandable description
- **Helpful status messages**: See how many results were found, what filters are active, and get suggestions if no results are found
- Fast search using FAISS index (both L2 and Cosine)

## Setup Instructions

### 1. Install dependencies

It's recommended to use a virtual environment. Then install dependencies:

```bash
pip install -r requirements.txt
```

### 2. Scrape Government Scheme Data (Optional)

If you need fresh data or want to update the schemes database:

```bash
python web_scrape.py
```

**Note:** This script uses Selenium to scrape data from myscheme.gov.in. It will:
- Open Chrome browser (requires Chrome and chromedriver)
- Navigate through all scheme pages
- Extract scheme name, state, description, and tags
- Save results to `myscheme_data.csv`

If you already have `myscheme_data.csv`, you can skip this step.

### 3. Generate Embeddings and FAISS Indices

**Important:** Run this before starting the dashboard:

```bash
python semantic_search_app.py
```

This script will:
- Load and preprocess the scheme data from `myscheme_data.csv`
- Apply text cleaning and transliteration (Devanagari to Latin)
- Generate semantic embeddings using the multilingual SentenceTransformer model
- Create and save the L2 FAISS index (`faiss_index.bin`)
- Save the scheme mapping (`scheme_mapping.csv`)

The cosine similarity index (`cosine_faiss_index.bin`) will be created automatically by the dashboard on first run if it does not exist.

### 4. Run the Streamlit Dashboard

```bash
streamlit run streamlit_dashboard.py
```

## Usage
- Enter your search query in the input box (e.g., "scholarship for students in Maharashtra").
- **Filter by state** using the sidebar dropdown for explicit control, or let the dashboard detect the state from your query.
- Click **Search** to see relevant schemes. Use **Clear Search** to reset your query and results.
- Results are shown in two columns:
  - **Left:** Euclidean (L2) distance results (lower score = more similar)
  - **Right:** Cosine similarity results (higher score = more similar)
- Each result card shows the scheme name, state, tags, a relevance score, and an expandable description.
- A summary below the results shows how many schemes appear in both searches.
- If no results are found, try different keywords or select a different state.

## How Similarity Search Works
- **L2 (Euclidean) Search:** Uses a FAISS index (`faiss_index.bin`) with L2 distance. Lower scores mean higher similarity.
- **Cosine Similarity Search:** Uses a FAISS index (`cosine_faiss_index.bin`) with normalized embeddings and inner product (dot product). Higher scores mean higher similarity.
- Both indices are managed automatically by the dashboard.

## Advanced: Cosine Similarity Utilities
- The module `cosine_faiss_utils.py` provides functions to create, save, load, and search a cosine similarity FAISS index.
- You can use these utilities in your own scripts for batch processing or experimentation.

## Requirements
- Python 3.8+
- See `requirements.txt` for Python package dependencies.

## Files
- `web_scrape.py`: Selenium-based web scraper to collect scheme data from myscheme.gov.in
- `semantic_search_app.py`: Preprocessing, embedding generation, and FAISS index creation script
- `streamlit_dashboard.py`: Main Streamlit app (now with L2 vs Cosine comparison)
- `cosine_faiss_utils.py`: Utilities for cosine similarity FAISS index
- `myscheme_data.csv`: Scheme data (generated by web_scrape.py)
- `scheme_mapping.csv`: Mapping of scheme data (generated by semantic_search_app.py)
- `faiss_index.bin`: Precomputed FAISS index (L2, generated by semantic_search_app.py)
- `cosine_faiss_index.bin`: Precomputed or auto-generated FAISS index (cosine similarity)
- `requirements.txt`: Python dependencies

---